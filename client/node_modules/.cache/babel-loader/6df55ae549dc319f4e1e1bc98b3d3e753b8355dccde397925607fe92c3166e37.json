{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\New folder (2)\\\\client\\\\src\\\\screens\\\\message.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, Component } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MessageScreen = _ref => {\n  _s();\n  let {\n    token\n  } = _ref;\n  function sendMessage(message, e) {\n    e.preventDefault();\n    if (message != \"\") {\n      fetch(\"http://localhost:5000/messages\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          token: token\n        },\n        body: new URLSearchParams({\n          message: message\n        })\n      });\n      setMessage(\"\");\n    }\n  }\n  const scrollToBottom = () => {\n    if (messagesEnd != null) messagesEnd.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [messagesEnd, setMessagesEnd] = useState();\n  const [socket, setSocket] = useState(null);\n  useEffect(() => {\n    fetch(\"http://localhost:5000/messages\", {\n      method: \"GET\",\n      headers: {\n        token: token\n      }\n    }).then(res => res.json()).then(data => setMessages(data));\n  }, []);\n  useEffect(() => {\n    setSocket(io(\"http://localhost:5000\", {\n      auth: {\n        token\n      }\n    }));\n    console.log(socket);\n    socket.on(\"message\", data => {\n      setMessages([...messages, data]);\n    });\n  }, [socket, messages], scrollToBottom());\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.messages,\n      children: [messages.map((message, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.message,\n        children: [message.username, \" : \", message.message]\n      }, \"message_\" + i.toString(), true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          float: \"left\",\n          clear: \"both\"\n        },\n        ref: el => {\n          setMessagesEnd(el);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        width: \"90%\"\n      },\n      onSubmit: e => sendMessage(message, e),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        autoFocus: true,\n        value: message,\n        onChange: e => setMessage(e.target.value),\n        type: \"text\",\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: styles.send,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(MessageScreen, \"1imPCP2oOvpRp3OuKNBaaZEo31w=\");\n_c = MessageScreen;\nconst styles = {\n  main: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"100vh\",\n    background: \"linear-gradient(to right, #5f2c82, #49a09d)\"\n  },\n  form: {\n    height: \"40rem\",\n    width: \"30rem\",\n    background: \"rgba(0, 0, 0, 0.3)\",\n    borderRadius: \"0.5rem\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  input: {\n    background: \"#00000069\",\n    color: \"white\",\n    padding: \".4rem\",\n    display: \"block\",\n    width: \"80%\",\n    marginBottom: \"1rem\",\n    fontSize: \"1.2rem\"\n  },\n  send: {\n    fontSize: \"1.2rem\",\n    display: \"block\",\n    background: \"rgb(165 45 255)\",\n    borderRadius: \"0.5rem\",\n    padding: \".4rem\",\n    width: \"50%\",\n    cursor: \"pointer\"\n  },\n  messages: {\n    height: \"25rem\",\n    width: \"80%\",\n    padding: \"0.8rem\",\n    overflowY: \"scroll\",\n    background: \"#00000069\",\n    marginBottom: \"1rem\"\n  },\n  message: {\n    color: \"white\",\n    fontSize: \"1.2rem\"\n  }\n};\nexport default MessageScreen;\nvar _c;\n$RefreshReg$(_c, \"MessageScreen\");","map":{"version":3,"names":["React","useState","useEffect","Component","io","jsxDEV","_jsxDEV","Fragment","_Fragment","MessageScreen","_ref","_s","token","sendMessage","message","e","preventDefault","fetch","method","headers","body","URLSearchParams","setMessage","scrollToBottom","messagesEnd","scrollIntoView","behavior","messages","setMessages","setMessagesEnd","socket","setSocket","then","res","json","data","auth","console","log","on","children","style","styles","map","i","username","toString","fileName","_jsxFileName","lineNumber","columnNumber","float","clear","ref","el","display","flexDirection","justifyContent","alignItems","width","onSubmit","autoFocus","value","onChange","target","type","input","send","_c","main","height","background","form","borderRadius","color","padding","marginBottom","fontSize","cursor","overflowY","$RefreshReg$"],"sources":["C:/Users/User/Desktop/New folder (2)/client/src/screens/message.jsx"],"sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nconst MessageScreen = ({ token }) => {\r\n  function sendMessage(message, e) {\r\n    e.preventDefault();\r\n    if (message != \"\") {\r\n      fetch(\"http://localhost:5000/messages\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          token: token,\r\n        },\r\n        body: new URLSearchParams({\r\n          message: message,\r\n        }),\r\n      });\r\n      setMessage(\"\");\r\n    }\r\n  }\r\n  const scrollToBottom = () => {\r\n    if (messagesEnd != null) messagesEnd.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messagesEnd, setMessagesEnd] = useState();\r\n  const [socket, setSocket] = useState(null);\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/messages\", {\r\n      method: \"GET\",\r\n      headers: { token: token },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => setMessages(data));\r\n  }, []);\r\n\r\n  useEffect(\r\n    () => {\r\n      setSocket(io(\"http://localhost:5000\", { auth: { token } }));\r\n      console.log(socket)\r\n      socket.on(\"message\", (data) => {\r\n        setMessages([...messages, data]);\r\n      });\r\n    },\r\n    [socket, messages],\r\n    scrollToBottom()\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div style={styles.messages}>\r\n        {messages.map((message, i) => (\r\n          <div key={\"message_\" + i.toString()} style={styles.message}>\r\n            {message.username} : {message.message}\r\n          </div>\r\n        ))}\r\n        <div\r\n          style={{ float: \"left\", clear: \"both\" }}\r\n          ref={(el) => {\r\n            setMessagesEnd(el);\r\n          }}\r\n        />\r\n      </div>\r\n      <form\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          width: \"90%\",\r\n        }}\r\n        onSubmit={(e) => sendMessage(message, e)}\r\n      >\r\n        <input\r\n          autoFocus\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          type=\"text\"\r\n          style={styles.input}\r\n        />\r\n        <button type=\"submit\" style={styles.send}>\r\n          Send\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  main: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: \"100vh\",\r\n    background: \"linear-gradient(to right, #5f2c82, #49a09d)\",\r\n  },\r\n  form: {\r\n    height: \"40rem\",\r\n    width: \"30rem\",\r\n    background: \"rgba(0, 0, 0, 0.3)\",\r\n    borderRadius: \"0.5rem\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  input: {\r\n    background: \"#00000069\",\r\n    color: \"white\",\r\n    padding: \".4rem\",\r\n    display: \"block\",\r\n    width: \"80%\",\r\n    marginBottom: \"1rem\",\r\n    fontSize: \"1.2rem\",\r\n  },\r\n  send: {\r\n    fontSize: \"1.2rem\",\r\n    display: \"block\",\r\n    background: \"rgb(165 45 255)\",\r\n    borderRadius: \"0.5rem\",\r\n    padding: \".4rem\",\r\n    width: \"50%\",\r\n    cursor: \"pointer\",\r\n  },\r\n  messages: {\r\n    height: \"25rem\",\r\n    width: \"80%\",\r\n    padding: \"0.8rem\",\r\n    overflowY: \"scroll\",\r\n    background: \"#00000069\",\r\n    marginBottom: \"1rem\",\r\n  },\r\n  message: {\r\n    color: \"white\",\r\n    fontSize: \"1.2rem\",\r\n  },\r\n};\r\n\r\nexport default MessageScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}